# Comparing `tmp/megfile-2.1.4-py3-none-any.whl.zip` & `tmp/megfile-2.2.0-py3-none-any.whl.zip`

## zipinfo {}

```diff
@@ -1,47 +1,47 @@
-Zip file size: 108538 bytes, number of entries: 45
--rw-rw-r--  2.0 unx     5434 b- defN 23-May-25 06:42 megfile/__init__.py
--rw-rw-r--  2.0 unx    10396 b- defN 23-Jul-07 05:32 megfile/cli.py
+Zip file size: 109401 bytes, number of entries: 45
+-rw-rw-r--  2.0 unx     5721 b- defN 23-Aug-01 02:09 megfile/__init__.py
+-rw-rw-r--  2.0 unx    12797 b- defN 23-Aug-01 01:53 megfile/cli.py
 -rw-rw-r--  2.0 unx    11349 b- defN 23-Jun-16 11:38 megfile/errors.py
--rw-rw-r--  2.0 unx    11621 b- defN 23-Jul-13 03:26 megfile/fs.py
+-rw-rw-r--  2.0 unx    11621 b- defN 23-Jul-24 07:01 megfile/fs.py
 -rw-rw-r--  2.0 unx    38532 b- defN 23-Jul-07 05:32 megfile/fs_path.py
--rw-rw-r--  2.0 unx     2477 b- defN 23-Jul-13 03:26 megfile/http.py
+-rw-rw-r--  2.0 unx     2477 b- defN 23-Jul-24 07:01 megfile/http.py
 -rw-rw-r--  2.0 unx     5360 b- defN 23-Jul-11 07:49 megfile/http_path.py
 -rw-rw-r--  2.0 unx     6219 b- defN 23-Jul-07 04:07 megfile/interfaces.py
 -rw-rw-r--  2.0 unx    29307 b- defN 23-Jul-07 04:07 megfile/pathlike.py
--rw-rw-r--  2.0 unx    12437 b- defN 23-Jul-13 03:26 megfile/s3.py
+-rw-rw-r--  2.0 unx    12437 b- defN 23-Jul-24 07:01 megfile/s3.py
 -rw-rw-r--  2.0 unx    84754 b- defN 23-Jul-10 05:12 megfile/s3_path.py
--rw-rw-r--  2.0 unx    11943 b- defN 23-Jul-13 03:26 megfile/sftp.py
--rw-rw-r--  2.0 unx    46668 b- defN 23-Jul-13 03:26 megfile/sftp_path.py
--rw-rw-r--  2.0 unx    32675 b- defN 23-Jul-21 06:05 megfile/smart.py
+-rw-rw-r--  2.0 unx    11943 b- defN 23-Jul-24 07:01 megfile/sftp.py
+-rw-rw-r--  2.0 unx    47103 b- defN 23-Jul-27 10:06 megfile/sftp_path.py
+-rw-rw-r--  2.0 unx    32694 b- defN 23-Jul-24 03:23 megfile/smart.py
 -rw-rw-r--  2.0 unx     6708 b- defN 23-Jul-21 05:33 megfile/smart_path.py
--rw-rw-r--  2.0 unx      559 b- defN 23-Jul-13 03:26 megfile/stdio.py
+-rw-rw-r--  2.0 unx      559 b- defN 23-Jul-24 07:01 megfile/stdio.py
 -rw-rw-r--  2.0 unx     2682 b- defN 23-Jun-16 02:18 megfile/stdio_path.py
--rw-rw-r--  2.0 unx       19 b- defN 23-Jul-21 06:20 megfile/version.py
+-rw-rw-r--  2.0 unx       19 b- defN 23-Aug-01 02:31 megfile/version.py
 -rw-rw-r--  2.0 unx        0 b- defN 23-May-25 06:42 megfile/lib/__init__.py
--rw-rw-r--  2.0 unx     4546 b- defN 23-Jul-21 05:53 megfile/lib/combine_reader.py
+-rw-rw-r--  2.0 unx     4546 b- defN 23-Aug-01 01:57 megfile/lib/combine_reader.py
 -rw-rw-r--  2.0 unx     2233 b- defN 23-Jun-13 05:49 megfile/lib/compare.py
--rw-rw-r--  2.0 unx     3013 b- defN 23-Jul-07 05:32 megfile/lib/compat.py
+-rw-rw-r--  2.0 unx     3033 b- defN 23-Aug-01 01:53 megfile/lib/compat.py
 -rw-rw-r--  2.0 unx     4054 b- defN 23-May-25 06:42 megfile/lib/fnmatch.py
 -rw-rw-r--  2.0 unx     9732 b- defN 23-Jul-07 05:32 megfile/lib/glob.py
 -rw-rw-r--  2.0 unx      929 b- defN 23-May-25 06:42 megfile/lib/joinpath.py
 -rw-rw-r--  2.0 unx     1915 b- defN 23-May-25 06:42 megfile/lib/lazy_handler.py
 -rw-rw-r--  2.0 unx     6934 b- defN 23-May-25 06:42 megfile/lib/s3_buffered_writer.py
 -rw-rw-r--  2.0 unx     1322 b- defN 23-May-25 06:42 megfile/lib/s3_cached_handler.py
 -rw-rw-r--  2.0 unx     6037 b- defN 23-Jul-07 05:32 megfile/lib/s3_limited_seekable_writer.py
 -rw-rw-r--  2.0 unx     3725 b- defN 23-May-25 06:42 megfile/lib/s3_memory_handler.py
 -rw-rw-r--  2.0 unx     3384 b- defN 23-Jul-07 05:32 megfile/lib/s3_pipe_handler.py
 -rw-rw-r--  2.0 unx    15033 b- defN 23-Jul-07 05:32 megfile/lib/s3_prefetch_reader.py
--rw-rw-r--  2.0 unx     3771 b- defN 23-Jul-21 05:53 megfile/lib/s3_share_cache_reader.py
+-rw-rw-r--  2.0 unx     3771 b- defN 23-Aug-01 01:57 megfile/lib/s3_share_cache_reader.py
 -rw-rw-r--  2.0 unx     2683 b- defN 23-May-25 06:42 megfile/lib/shadow_handler.py
 -rw-rw-r--  2.0 unx     2044 b- defN 23-May-25 06:42 megfile/lib/stdio_handler.py
 -rw-rw-r--  2.0 unx      103 b- defN 23-Jun-16 02:18 megfile/lib/url.py
 -rw-rw-r--  2.0 unx     9005 b- defN 23-Jul-07 05:32 megfile/utils/__init__.py
 -rw-rw-r--  2.0 unx     2538 b- defN 23-Jul-13 03:47 megfile/utils/mutex.py
--rw-rw-r--  2.0 unx    11357 b- defN 23-Jul-21 06:21 megfile-2.1.4.dist-info/LICENSE
--rw-rw-r--  2.0 unx     1080 b- defN 23-Jul-21 06:21 megfile-2.1.4.dist-info/LICENSE.pyre
--rw-rw-r--  2.0 unx    10154 b- defN 23-Jul-21 06:21 megfile-2.1.4.dist-info/METADATA
--rw-rw-r--  2.0 unx       92 b- defN 23-Jul-21 06:21 megfile-2.1.4.dist-info/WHEEL
--rw-rw-r--  2.0 unx       49 b- defN 23-Jul-21 06:21 megfile-2.1.4.dist-info/entry_points.txt
--rw-rw-r--  2.0 unx        8 b- defN 23-Jul-21 06:21 megfile-2.1.4.dist-info/top_level.txt
--rw-rw-r--  2.0 unx     3603 b- defN 23-Jul-21 06:21 megfile-2.1.4.dist-info/RECORD
-45 files, 428484 bytes uncompressed, 102908 bytes compressed:  76.0%
+-rw-rw-r--  2.0 unx    11357 b- defN 23-Aug-01 02:32 megfile-2.2.0.dist-info/LICENSE
+-rw-rw-r--  2.0 unx     1080 b- defN 23-Aug-01 02:32 megfile-2.2.0.dist-info/LICENSE.pyre
+-rw-rw-r--  2.0 unx    10595 b- defN 23-Aug-01 02:32 megfile-2.2.0.dist-info/METADATA
+-rw-rw-r--  2.0 unx       92 b- defN 23-Aug-01 02:32 megfile-2.2.0.dist-info/WHEEL
+-rw-rw-r--  2.0 unx       49 b- defN 23-Aug-01 02:32 megfile-2.2.0.dist-info/entry_points.txt
+-rw-rw-r--  2.0 unx        8 b- defN 23-Aug-01 02:32 megfile-2.2.0.dist-info/top_level.txt
+-rw-rw-r--  2.0 unx     3603 b- defN 23-Aug-01 02:32 megfile-2.2.0.dist-info/RECORD
+45 files, 432087 bytes uncompressed, 103771 bytes compressed:  76.0%
```

## zipnote {}

```diff
@@ -108,29 +108,29 @@
 
 Filename: megfile/utils/__init__.py
 Comment: 
 
 Filename: megfile/utils/mutex.py
 Comment: 
 
-Filename: megfile-2.1.4.dist-info/LICENSE
+Filename: megfile-2.2.0.dist-info/LICENSE
 Comment: 
 
-Filename: megfile-2.1.4.dist-info/LICENSE.pyre
+Filename: megfile-2.2.0.dist-info/LICENSE.pyre
 Comment: 
 
-Filename: megfile-2.1.4.dist-info/METADATA
+Filename: megfile-2.2.0.dist-info/METADATA
 Comment: 
 
-Filename: megfile-2.1.4.dist-info/WHEEL
+Filename: megfile-2.2.0.dist-info/WHEEL
 Comment: 
 
-Filename: megfile-2.1.4.dist-info/entry_points.txt
+Filename: megfile-2.2.0.dist-info/entry_points.txt
 Comment: 
 
-Filename: megfile-2.1.4.dist-info/top_level.txt
+Filename: megfile-2.2.0.dist-info/top_level.txt
 Comment: 
 
-Filename: megfile-2.1.4.dist-info/RECORD
+Filename: megfile-2.2.0.dist-info/RECORD
 Comment: 
 
 Zip file comment:
```

## megfile/__init__.py

```diff
@@ -1,22 +1,22 @@
 from megfile.fs import fs_abspath, fs_access, fs_cwd, fs_exists, fs_expanduser, fs_getmd5, fs_getmtime, fs_getsize, fs_glob, fs_glob_stat, fs_home, fs_iglob, fs_isabs, fs_isdir, fs_isfile, fs_islink, fs_ismount, fs_listdir, fs_load_from, fs_lstat, fs_makedirs, fs_move, fs_readlink, fs_realpath, fs_relpath, fs_remove, fs_rename, fs_resolve, fs_save_as, fs_scan, fs_scan_stat, fs_scandir, fs_stat, fs_symlink, fs_sync, fs_unlink, fs_walk, is_fs
 from megfile.fs_path import FSPath
+from megfile.http import http_exists, http_getmtime, http_getsize, http_open, http_stat, is_http
 from megfile.http_path import HttpPath, HttpsPath
 from megfile.s3 import is_s3, s3_access, s3_buffered_open, s3_cached_open, s3_concat, s3_copy, s3_download, s3_exists, s3_getmd5, s3_getmtime, s3_getsize, s3_glob, s3_glob_stat, s3_hasbucket, s3_iglob, s3_isdir, s3_isfile, s3_listdir, s3_load_content, s3_load_from, s3_lstat, s3_makedirs, s3_memory_open, s3_move, s3_open, s3_path_join, s3_pipe_open, s3_prefetch_open, s3_readlink, s3_remove, s3_rename, s3_save_as, s3_scan, s3_scan_stat, s3_scandir, s3_stat, s3_symlink, s3_sync, s3_unlink, s3_upload, s3_walk
 from megfile.s3_path import S3Path
 from megfile.sftp import is_sftp, sftp_absolute, sftp_chmod, sftp_concat, sftp_copy, sftp_exists, sftp_getmd5, sftp_getmtime, sftp_getsize, sftp_glob, sftp_glob_stat, sftp_iglob, sftp_isdir, sftp_isfile, sftp_islink, sftp_listdir, sftp_load_from, sftp_lstat, sftp_makedirs, sftp_move, sftp_open, sftp_path_join, sftp_readlink, sftp_realpath, sftp_remove, sftp_rename, sftp_resolve, sftp_rmdir, sftp_save_as, sftp_scan, sftp_scan_stat, sftp_scandir, sftp_stat, sftp_symlink, sftp_sync, sftp_unlink, sftp_walk
 from megfile.sftp_path import SftpPath
 from megfile.smart import smart_access, smart_cache, smart_combine_open, smart_concat, smart_copy, smart_exists, smart_getmd5, smart_getmtime, smart_getsize, smart_glob, smart_glob_stat, smart_iglob, smart_isdir, smart_isfile, smart_islink, smart_listdir, smart_load_content, smart_load_from, smart_load_text, smart_lstat, smart_makedirs, smart_move, smart_open, smart_path_join, smart_readlink, smart_realpath, smart_remove, smart_rename, smart_save_as, smart_save_content, smart_save_text, smart_scan, smart_scan_stat, smart_scandir, smart_stat, smart_symlink, smart_sync, smart_touch, smart_unlink, smart_walk
 from megfile.smart_path import SmartPath
+from megfile.stdio import is_stdio, stdio_open
 from megfile.stdio_path import StdioPath
 from megfile.version import VERSION as __version__
 
 __all__ = [
-    'is_fs',
-    'is_s3',
     'smart_access',
     'smart_cache',
     'smart_combine_open',
     'smart_copy',
     'smart_exists',
     'smart_getmtime',
     'smart_getsize',
@@ -50,14 +50,15 @@
     'smart_walk',
     'smart_cache',
     'smart_getmd5',
     'smart_symlink',
     'smart_readlink',
     'smart_lstat',
     'smart_concat',
+    'is_s3',
     's3_access',
     's3_buffered_open',
     's3_cached_open',
     's3_copy',
     's3_download',
     's3_exists',
     's3_getmd5',
@@ -90,14 +91,15 @@
     's3_lstat',
     's3_unlink',
     's3_upload',
     's3_walk',
     's3_symlink',
     's3_readlink',
     's3_concat',
+    'is_fs',
     'fs_abspath',
     'fs_access',
     'fs_exists',
     'fs_getmtime',
     'fs_getsize',
     'fs_glob_stat',
     'fs_glob',
@@ -127,14 +129,22 @@
     'fs_cwd',
     'fs_home',
     'fs_expanduser',
     'fs_resolve',
     'fs_getmd5',
     'fs_symlink',
     'fs_readlink',
+    'is_http',
+    'http_open',
+    'http_stat',
+    'http_getsize',
+    'http_getmtime',
+    'http_exists',
+    'is_stdio',
+    'stdio_open',
     'is_sftp',
     'sftp_readlink',
     'sftp_absolute',
     'sftp_glob',
     'sftp_iglob',
     'sftp_glob_stat',
     'sftp_resolve',
```

## megfile/cli.py

```diff
@@ -13,19 +13,20 @@
 from megfile.smart import smart_copy, smart_getmd5, smart_getmtime, smart_getsize, smart_glob, smart_glob_stat, smart_isdir, smart_isfile, smart_makedirs, smart_move, smart_open, smart_path_join, smart_remove, smart_rename, smart_scan_stat, smart_scandir, smart_stat, smart_sync, smart_sync_with_progress, smart_touch, smart_unlink
 from megfile.smart_path import SmartPath
 from megfile.utils import get_human_size
 from megfile.version import VERSION
 
 logging.basicConfig(level=logging.ERROR)
 logging.getLogger('megfile').setLevel(level=logging.INFO)
+DEFAULT_BLOCK_SIZE = 8 * 2**20  # 8MB
 
 
 @click.group()
 def cli():
-    """Megfile Client"""
+    """Client"""
 
 
 def safe_cli():  # pragma: no cover
     try:
         cli()
     except Exception as e:
         click.echo(f"\n[{type(e).__name__}] {e}", err=True)
@@ -303,18 +304,94 @@
 @click.argument('path')
 def cat(path: str):
     with smart_open(path, 'rb') as file:
         shutil.copyfileobj(file, sys.stdout.buffer)
 
 
 @cli.command(
+    short_help='Concatenate any files and send first n lines of them to stdout.'
+)
+@click.argument('path')
+@click.option(
+    '-n',
+    '--lines',
+    type=click.INT,
+    default=10,
+    help='print the first NUM lines')
+def head(path: str, lines: int):
+    with smart_open(path, 'rb') as f:
+        f.seek(0, os.SEEK_END)
+        file_size = f.tell()
+        f.seek(0, os.SEEK_SET)
+        for _ in range(lines):
+            click.echo(f.readline().strip(b'\n'))
+            if f.tell() >= file_size:
+                break
+
+
+@cli.command(
+    short_help='Concatenate any files and send last n lines of them to stdout.')
+@click.argument('path')
+@click.option(
+    '-n',
+    '--lines',
+    type=click.INT,
+    default=10,
+    help='print the last NUM lines')
+def tail(path: str, lines: int):
+    line_list = []
+    with smart_open(path, 'rb') as f:
+        f.seek(0, os.SEEK_END)
+        file_size = f.tell()
+        f.seek(0, os.SEEK_SET)
+
+        for current_offset in range(file_size - DEFAULT_BLOCK_SIZE,
+                                    0 - DEFAULT_BLOCK_SIZE,
+                                    -DEFAULT_BLOCK_SIZE):
+            current_offset = max(0, current_offset)
+            f.seek(current_offset)
+            block_lines = f.read(DEFAULT_BLOCK_SIZE).split(b'\n')
+            if len(line_list) > 0:
+                block_lines[-1] += line_list[0]
+                block_lines.extend(line_list[1:])
+            if len(block_lines) > lines:
+                line_list = block_lines[-lines:]
+                break
+            else:
+                line_list = block_lines
+    for line in line_list:
+        click.echo(line)
+
+
+@cli.command(short_help='Write bytes from stdin to file.')
+@click.argument('path')
+@click.option('-a', '--append', is_flag=True, help='Append to the given file')
+@click.option(
+    '-o', '--stdout', is_flag=True, help='File content to standard output')
+def to(path: str, append: bool, stdout: bool):
+    mode = 'wb'
+    if append:
+        mode = 'ab'
+    with smart_open('stdio://0', 'rb') as stdin, smart_open(
+            path, mode) as f, smart_open('stdio://1', 'wb') as stdout_fd:
+        length = 16 * 1024
+        while True:
+            buf = stdin.read(length)
+            if not buf:
+                break
+            f.write(buf)
+            if stdout:
+                stdout_fd.write(buf)
+
+
+@cli.command(
     short_help='Produce an md5sum file for all the objects in the path.')
 @click.argument('path')
 def md5sum(path: str):
-    click.echo(smart_getmd5(path))
+    click.echo(smart_getmd5(path, recalculate=True))
 
 
 @cli.command(
     short_help='Return the total size and number of objects in remote:path.')
 @click.argument('path')
 def size(path: str):
     click.echo(smart_getsize(path))
```

## megfile/sftp_path.py

```diff
@@ -471,39 +471,50 @@
         raise OSError(f'Failed to concat {src_paths} to {dst_path}')
 
 
 @SmartPath.register
 class SftpPath(URIPath):
     """sftp protocol
 
-    uri format: sftp://[username[:password]@]hostname[:port]/file_path
-    e.g. sftp://username:password@127.0.0.1:22/data/test/
+    uri format: 
+    - absolute path
+        - sftp://[username[:password]@]hostname[:port]//file_path
+    - relative path
+        - - sftp://[username[:password]@]hostname[:port]/file_path
     """
 
     protocol = "sftp"
 
     def __init__(self, path: "PathLike", *other_paths: "PathLike"):
         super().__init__(path, *other_paths)
         parts = urlsplit(self.path)
-        self._real_path = parts.path
-        if not self._real_path.startswith('/'):
-            self._real_path = f"/{self._real_path}"
         self._urlsplit_parts = parts
+        self._real_path = parts.path
+        if parts.path.startswith('//'):
+            self._root_dir = '/'
+        else:
+            self._root_dir = self._client.normalize('.')
+        self._real_path = os.path.join(self._root_dir, parts.path.lstrip('/'))
 
     @property
     def _client(self):
         return get_sftp_client(
             hostname=self._urlsplit_parts.hostname,
             port=self._urlsplit_parts.port,
             username=self._urlsplit_parts.username,
             password=self._urlsplit_parts.password)
 
-    def _generate_path_object(self, sftp_local_path: str):
-        new_parts = self._urlsplit_parts._replace(
-            path=sftp_local_path.lstrip('/'))
+    def _generate_path_object(
+            self, sftp_local_path: str, resolve: bool = False):
+        if resolve or self._root_dir == '/':
+            sftp_local_path = f"//{sftp_local_path.lstrip('/')}"
+        else:
+            sftp_local_path = os.path.relpath(
+                sftp_local_path, start=self._root_dir)
+        new_parts = self._urlsplit_parts._replace(path=sftp_local_path)
         return self.from_path(urlunsplit(new_parts))
 
     def exists(self, followlinks: bool = False) -> bool:
         '''
         Test if the path exists
 
         :param followlinks: False if regard symlink as file, else True
@@ -967,15 +978,15 @@
         '''Equal to sftp_realpath
 
         :param strict: Ignore this parameter, just for compatibility
         :return: Return the canonical path of the specified filename, eliminating any symbolic links encountered in the path.
         :rtype: SftpPath
         '''
         path = self._client.normalize(self._real_path)
-        return self._generate_path_object(path)
+        return self._generate_path_object(path, resolve=True)
 
     def md5(self, recalculate: bool = False, followlinks: bool = True):
         '''
         Calculate the md5 value of the file
 
         :param recalculate: Ignore this parameter, just for compatibility
         :param followlinks: Ignore this parameter, just for compatibility
```

## megfile/smart.py

```diff
@@ -60,14 +60,15 @@
     'smart_relpath',
     'smart_abspath',
     'smart_isabs',
     'smart_symlink',
     'smart_readlink',
     'register_copy_func',
     'smart_concat',
+    'SmartCacher',
 ]
 
 
 def smart_symlink(src_path: PathLike, dst_path: PathLike) -> None:
     '''
     Create a symbolic link pointing to src_path named path.
```

## megfile/version.py

```diff
@@ -1 +1 @@
-VERSION = "2.1.4"
+VERSION = "2.2.0"
```

## megfile/lib/compat.py

```diff
@@ -15,15 +15,15 @@
     return result
 
 
 import sys
 
 if sys.version_info.major == 3 and sys.version_info.minor >= 8:
     from shutil import copytree
-else:
+else:  # pragma: no cover
     from shutil import Error, copy2, copystat
 
     def copytree(
             src,
             dst,
             symlinks=False,
             ignore=None,
```

## Comparing `megfile-2.1.4.dist-info/LICENSE` & `megfile-2.2.0.dist-info/LICENSE`

 * *Files identical despite different names*

## Comparing `megfile-2.1.4.dist-info/LICENSE.pyre` & `megfile-2.2.0.dist-info/LICENSE.pyre`

 * *Files identical despite different names*

## Comparing `megfile-2.1.4.dist-info/METADATA` & `megfile-2.2.0.dist-info/METADATA`

 * *Files 4% similar despite different names*

```diff
@@ -1,10 +1,10 @@
 Metadata-Version: 2.1
 Name: megfile
-Version: 2.1.4
+Version: 2.2.0
 Summary: Megvii file operation library
 Home-page: https://github.com/megvii-research/megfile
 Author: megvii
 Author-email: megfile@megvii.com
 Classifier: Development Status :: 4 - Beta
 Classifier: Environment :: Console
 Classifier: Intended Audience :: Developers
@@ -58,14 +58,37 @@
 * All-inclusive functions like `smart_exists` / `smart_stat` / `smart_sync`. If you don't find the functions you want, [submit an issue](https://github.com/megvii-research/megfile/issues).
 * Compatible with `pathlib.Path` interface, referring to `S3Path` and `SmartPath`.
 
 ## Quick Start
 
 Here's an example of writing a file to s3 / sftp / fs, syncing to local, reading and finally deleting it.
 
+### Path Format
+- local file
+    - unix filesystem path
+    - examples:
+        - `/data/test.txt`
+        - `test.txt`
+        - 1
+- oss
+    - `s3[+profile_name]://bucket/key`
+- sftp
+    - `sftp://[username[:password]@]hostname[:port]//absolute_file_path`
+    - `sftp://[username[:password]@]hostname[:port]/relative_file_path`
+- http
+    - http / https url
+    - examples:
+        - `http://hostname/test`
+        - `https://hostname/test`
+- stdio
+    - `stdio://-`
+    - `stdio://0`
+    - `stdio://1`
+    - `stdio://2`
+
 ### Functional Interface
 ```python
 from megfile import smart_open, smart_exists, smart_sync, smart_remove, smart_glob
 
 # open a file in s3 bucket
 with smart_open('s3://playground/megfile-test', 'w') as fp:
     fp.write('megfile is not silver bullet')
@@ -197,15 +220,15 @@
     endpoint_url = https://profile2.s3.custom.com
 
 
 # python
 megfile.smart_copy('s3+profile1://bucket/key', 's3+profile2://bucket/key')
 ```
 
-sftp path format is `sftp://[username[:password]@]hostname[:port]/file_path`, and sftp support some environments:
+sftp support some environments:
 ```
 # If you are not set username or password in path, you can set them in environments
 $ export SFTP_USERNAME=user
 $ export SFTP_PASSWORD=user_password
 
 # You can also set private key for sftp connection 
 $ export SFTP_PRIVATE_KEY_PATH=/home/user/custom_private_key_path  # default not use private key
```

## Comparing `megfile-2.1.4.dist-info/RECORD` & `megfile-2.2.0.dist-info/RECORD`

 * *Files 6% similar despite different names*

```diff
@@ -1,29 +1,29 @@
-megfile/__init__.py,sha256=wlijLJS6F8Vdm1xjpsjd9fKBeDGpgIMrVsXYSeOQ4Xw,5434
-megfile/cli.py,sha256=5WnLtC2PBXfNDB4h9i4idjMEwu334MGXz-VdbfHoed8,10396
+megfile/__init__.py,sha256=Qsi3XNP_0XYoSol-1AGutZqo0rfBnzaiZ-HVXll4fB0,5721
+megfile/cli.py,sha256=zB6a1QjvIXqmd4nQR9YSTy3RH61pTX14E63uICjIRG8,12797
 megfile/errors.py,sha256=H5wCiVBvOtQo5cu3JLhAUCpQJsCkPNm1KNw9o8y4Las,11349
 megfile/fs.py,sha256=sjkm_LsvNCw8hj9Ee-1HSNzvg7bRHTPem8KTDDBQlCw,11621
 megfile/fs_path.py,sha256=Lz-u8XL2RMViHl_39yapAwX5XSE_ZpQsuhAvVve6rk8,38532
 megfile/http.py,sha256=Juz95GscschvmElieLIWqO2A4BrqJnrtTWTa9uzNN_4,2477
 megfile/http_path.py,sha256=XtpbYHdtHZysjkz6Xdr4fe8E6hlsV4iLNoIZaBk-_P4,5360
 megfile/interfaces.py,sha256=h3tWE8hVt5S-HopaMAX6lunPJ97vzhv6jH_2HubcDNc,6219
 megfile/pathlike.py,sha256=52e6POtMfUCC3Hb9XNwBLXM3Gkz3aGP8H8AagGKlDSg,29307
 megfile/s3.py,sha256=6d9bBVkVdXIvmJLfpOgJkK4nVAsLR3lirrB6x1-P2y8,12437
 megfile/s3_path.py,sha256=2AY_Rcn0ZR2TpPSqWxBcbUuQ3JuS7XerZ-wBK4wXyMo,84754
 megfile/sftp.py,sha256=qzfgI-MGzNsr7adUQaiVKS7zRHGuK-Hs6o45wNIAcww,11943
-megfile/sftp_path.py,sha256=Gb-x0H3ziX5N7pMxj768-ootIfn5ZTyATi_gT4FWqMw,46668
-megfile/smart.py,sha256=GbQrOPAc_KUd4MarYdgBwjtTeMqFDF8J4FULqAvWaB4,32675
+megfile/sftp_path.py,sha256=h_NeZtkKJ44hBIuhvBbLUlADm02uEkRT2T4PBU44uP4,47103
+megfile/smart.py,sha256=xjRRujYAPzXlrYxV7ZCAPXl0biUNn4730ATKc_tzIzE,32694
 megfile/smart_path.py,sha256=Rwb1McXsshi9-F6miTRqE6j8FO2j1edjmSxZF32YZ6E,6708
 megfile/stdio.py,sha256=qmi1c7VTll6Y6ya9MCd-dSKffocX2GafA-YUncZRU1Y,559
 megfile/stdio_path.py,sha256=ULMzGOj7SBMn3c7fYVSDepT_1nEUiVetc-xRt2pR5o4,2682
-megfile/version.py,sha256=INwNgAtJTWwjcC9CT2Iw7J62gdGUKLQhNVAD0EOp6H4,19
+megfile/version.py,sha256=SX94SfG1HNW6IdIYW_iqO17A0qZmHZUfyXnyAzilMUs,19
 megfile/lib/__init__.py,sha256=47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU,0
 megfile/lib/combine_reader.py,sha256=XFSqEY5A5X5Uf7eQ6AXAzrvNteESSXvKNVPktGjo3KY,4546
 megfile/lib/compare.py,sha256=yG2fZve_gMg32rQVCdwixBdqgYRsjn-24TqhALQaOrA,2233
-megfile/lib/compat.py,sha256=6m4eIwCndB8CbIl0FRx0Y0tg8VAcjdRLHma2bdWPO0k,3013
+megfile/lib/compat.py,sha256=rYjfzQ3svuY7pB37W1JGyWH1kxd9aT4RtIe90npPtXI,3033
 megfile/lib/fnmatch.py,sha256=HgdlnEWBsdFUOZqnW_v1kj1jeH_9lMcCqW85pyMu4vM,4054
 megfile/lib/glob.py,sha256=7i9dIput9rI9JIPyTZX-JDmFS7IP_THlX1k-35foAfw,9732
 megfile/lib/joinpath.py,sha256=D4Px6-lnDDpYs1LMUHkTIGqMPJQ0oCBGfTzREs373iU,929
 megfile/lib/lazy_handler.py,sha256=f1rip2_T57vVo0WRNXve2bAa4LArvVheMfQg1S0vFzg,1915
 megfile/lib/s3_buffered_writer.py,sha256=AGjCNQ1X16kjFbEJouavkO6ykmlAtfVKBPAD-yYwAT0,6934
 megfile/lib/s3_cached_handler.py,sha256=e4KamTLMIPKa96yp7HGF05wDl2Yfoizz9pBrz-uAQ5w,1322
 megfile/lib/s3_limited_seekable_writer.py,sha256=NSBh5cZCCtwZM0DTwfPkpOA_h0NXd9-6qjasOby5zxc,6037
@@ -32,14 +32,14 @@
 megfile/lib/s3_prefetch_reader.py,sha256=9YBnxKeOZ5RPbUw9vZ_PpYZzevfhw-GLkw08HIy4KVk,15033
 megfile/lib/s3_share_cache_reader.py,sha256=QyZvzVpTswgiXv-E8QhV_jFdQjCBxVcgbgybXo6d1cM,3771
 megfile/lib/shadow_handler.py,sha256=IbFyTw107t-yWH0cGrDjAJX-CS3xeEr77_PTGsnSgk4,2683
 megfile/lib/stdio_handler.py,sha256=QDWtcZxz-hzi-rqQUiSlR3NrihX1fjK_Rj9T2mdTFEg,2044
 megfile/lib/url.py,sha256=VbQLjo0s4AaV0iSk66BcjI68aUTcN9zBZ5x6-cM4Qvs,103
 megfile/utils/__init__.py,sha256=DEVSwUQ1-1rkHBIuXBxgEYiepq8W25JIWYQrC1gcFrc,9005
 megfile/utils/mutex.py,sha256=-2KH3bNovKRd9zvsXq9n3bWM7rQdoG9hO7tUPxVG_Po,2538
-megfile-2.1.4.dist-info/LICENSE,sha256=WNHhf_5RCaeuKWyq_K39vmp9F28LxKsB4SpomwSZ2L0,11357
-megfile-2.1.4.dist-info/LICENSE.pyre,sha256=9lf5nT-5ZH25JijpYAequ0bl8E8z5JmZB1qrjiUMp84,1080
-megfile-2.1.4.dist-info/METADATA,sha256=m5WS4ZzezadAsLn4UK7HNlIaTnOHGJc1cCWyaXJwqVk,10154
-megfile-2.1.4.dist-info/WHEEL,sha256=pkctZYzUS4AYVn6dJ-7367OJZivF2e8RA9b_ZBjif18,92
-megfile-2.1.4.dist-info/entry_points.txt,sha256=M6ZWSSv5_5_QtIpZafy3vq7WuOJ_5dSGQQnEZbByt2Q,49
-megfile-2.1.4.dist-info/top_level.txt,sha256=i3rMgdU1ZAJekAceojhA-bkm3749PzshtRmLTbeLUPQ,8
-megfile-2.1.4.dist-info/RECORD,,
+megfile-2.2.0.dist-info/LICENSE,sha256=WNHhf_5RCaeuKWyq_K39vmp9F28LxKsB4SpomwSZ2L0,11357
+megfile-2.2.0.dist-info/LICENSE.pyre,sha256=9lf5nT-5ZH25JijpYAequ0bl8E8z5JmZB1qrjiUMp84,1080
+megfile-2.2.0.dist-info/METADATA,sha256=5hJWi8RWnKtRNaoubN8ZWAtJ-x62XVGsDUEjN9XVI-4,10595
+megfile-2.2.0.dist-info/WHEEL,sha256=pkctZYzUS4AYVn6dJ-7367OJZivF2e8RA9b_ZBjif18,92
+megfile-2.2.0.dist-info/entry_points.txt,sha256=M6ZWSSv5_5_QtIpZafy3vq7WuOJ_5dSGQQnEZbByt2Q,49
+megfile-2.2.0.dist-info/top_level.txt,sha256=i3rMgdU1ZAJekAceojhA-bkm3749PzshtRmLTbeLUPQ,8
+megfile-2.2.0.dist-info/RECORD,,
```

