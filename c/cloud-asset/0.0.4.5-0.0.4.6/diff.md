# Comparing `tmp/cloud_asset-0.0.4.5-py3-none-any.whl.zip` & `tmp/cloud_asset-0.0.4.6-py3-none-any.whl.zip`

## zipinfo {}

```diff
@@ -1,42 +1,42 @@
-Zip file size: 45240 bytes, number of entries: 40
+Zip file size: 45853 bytes, number of entries: 40
 -rw-rw-rw-  2.0 fat      102 b- defN 23-Jan-11 08:03 asset/__init__.py
 -rw-rw-rw-  2.0 fat      863 b- defN 23-Apr-24 03:08 asset/asset_register.py
 -rw-rw-rw-  2.0 fat     3680 b- defN 23-Feb-09 07:04 asset/asset_table.py
--rw-rw-rw-  2.0 fat    17406 b- defN 23-May-25 00:54 asset/base.py
+-rw-rw-rw-  2.0 fat    17652 b- defN 23-Aug-01 07:08 asset/base.py
 -rw-rw-rw-  2.0 fat     3255 b- defN 23-May-24 07:46 asset/cli.py
--rw-rw-rw-  2.0 fat     3068 b- defN 23-May-24 07:31 asset/commands.py
+-rw-rw-rw-  2.0 fat     3243 b- defN 23-Aug-01 07:08 asset/commands.py
 -rw-rw-rw-  2.0 fat     3236 b- defN 23-Apr-26 09:11 asset/conf.py
 -rw-rw-rw-  2.0 fat      545 b- defN 23-Jan-30 08:11 asset/ctx.py
 -rw-rw-rw-  2.0 fat      286 b- defN 23-Jan-30 01:42 asset/exceptions.py
 -rw-rw-rw-  2.0 fat     1581 b- defN 23-Apr-23 09:08 asset/schema.py
--rw-rw-rw-  2.0 fat     1425 b- defN 23-Jun-06 02:54 asset/tools.py
+-rw-rw-rw-  2.0 fat     1809 b- defN 23-Jul-05 01:53 asset/tools.py
 -rw-rw-rw-  2.0 fat     7093 b- defN 23-Jun-06 06:54 asset/utils.py
 -rw-rw-rw-  2.0 fat      141 b- defN 23-May-24 08:57 asset/aliyun/__init__.py
 -rw-rw-rw-  2.0 fat    15459 b- defN 23-May-24 09:02 asset/aliyun/ecs.py
 -rw-rw-rw-  2.0 fat     2831 b- defN 23-Jun-06 07:11 asset/aliyun/ram.py
 -rw-rw-rw-  2.0 fat      176 b- defN 23-Jun-06 06:40 asset/aws/__init__.py
 -rw-rw-rw-  2.0 fat     2510 b- defN 23-Jun-06 06:51 asset/aws/account.py
 -rw-rw-rw-  2.0 fat     4878 b- defN 23-Apr-10 10:58 asset/aws/cloudwatch.py
 -rw-rw-rw-  2.0 fat    11132 b- defN 23-Apr-14 07:50 asset/aws/ec2.py
--rw-rw-rw-  2.0 fat     3055 b- defN 23-Apr-10 10:58 asset/aws/elb.py
+-rw-rw-rw-  2.0 fat     3059 b- defN 23-Aug-01 06:58 asset/aws/elb.py
 -rw-rw-rw-  2.0 fat     8620 b- defN 23-Apr-10 10:58 asset/aws/elb_v2.py
 -rw-rw-rw-  2.0 fat     9638 b- defN 23-Feb-10 09:11 asset/aws/rds.py
 -rw-rw-rw-  2.0 fat     3172 b- defN 23-Feb-09 08:29 asset/aws/s3.py
 -rw-rw-rw-  2.0 fat      164 b- defN 23-May-04 03:03 asset/huawei/__init__.py
 -rw-rw-rw-  2.0 fat     7068 b- defN 23-Apr-28 02:18 asset/huawei/ecs.py
 -rw-rw-rw-  2.0 fat     2112 b- defN 23-May-04 02:58 asset/huawei/vpc.py
 -rw-rw-rw-  2.0 fat      175 b- defN 23-May-24 07:12 asset/tencent/__init__.py
--rw-rw-rw-  2.0 fat     3164 b- defN 23-May-24 08:39 asset/tencent/cam.py
+-rw-rw-rw-  2.0 fat     3832 b- defN 23-Jul-31 03:23 asset/tencent/cam.py
 -rw-rw-rw-  2.0 fat     2901 b- defN 23-Apr-10 10:58 asset/tencent/cdb_mysql.py
 -rw-rw-rw-  2.0 fat     2309 b- defN 23-Apr-10 10:58 asset/tencent/clb.py
 -rw-rw-rw-  2.0 fat     1804 b- defN 23-Apr-10 10:58 asset/tencent/cos.py
 -rw-rw-rw-  2.0 fat     2242 b- defN 23-May-04 01:59 asset/tencent/cvm.py
 -rw-rw-rw-  2.0 fat     3279 b- defN 23-Apr-10 10:58 asset/tencent/monitor.py
 -rw-rw-rw-  2.0 fat    11514 b- defN 23-Apr-17 06:58 asset/tencent/vpc.py
--rw-rw-rw-  2.0 fat    11558 b- defN 23-Jun-06 08:03 cloud_asset-0.0.4.5.dist-info/LICENSE
--rw-rw-rw-  2.0 fat     1193 b- defN 23-Jun-06 08:03 cloud_asset-0.0.4.5.dist-info/METADATA
--rw-rw-rw-  2.0 fat       92 b- defN 23-Jun-06 08:03 cloud_asset-0.0.4.5.dist-info/WHEEL
--rw-rw-rw-  2.0 fat       47 b- defN 23-Jun-06 08:02 cloud_asset-0.0.4.5.dist-info/entry_points.txt
--rw-rw-rw-  2.0 fat        6 b- defN 23-Jun-06 08:02 cloud_asset-0.0.4.5.dist-info/top_level.txt
--rw-rw-r--  2.0 fat     3085 b- defN 23-Jun-06 08:03 cloud_asset-0.0.4.5.dist-info/RECORD
-40 files, 156865 bytes uncompressed, 40440 bytes compressed:  74.2%
+-rw-rw-rw-  2.0 fat    11558 b- defN 23-Aug-01 07:11 cloud_asset-0.0.4.6.dist-info/LICENSE
+-rw-rw-rw-  2.0 fat     1193 b- defN 23-Aug-01 07:11 cloud_asset-0.0.4.6.dist-info/METADATA
+-rw-rw-rw-  2.0 fat       92 b- defN 23-Aug-01 07:11 cloud_asset-0.0.4.6.dist-info/WHEEL
+-rw-rw-rw-  2.0 fat       47 b- defN 23-Aug-01 07:11 cloud_asset-0.0.4.6.dist-info/entry_points.txt
+-rw-rw-rw-  2.0 fat        6 b- defN 23-Aug-01 07:11 cloud_asset-0.0.4.6.dist-info/top_level.txt
+-rw-rw-r--  2.0 fat     3085 b- defN 23-Aug-01 07:11 cloud_asset-0.0.4.6.dist-info/RECORD
+40 files, 158342 bytes uncompressed, 41053 bytes compressed:  74.1%
```

## zipnote {}

```diff
@@ -96,26 +96,26 @@
 
 Filename: asset/tencent/monitor.py
 Comment: 
 
 Filename: asset/tencent/vpc.py
 Comment: 
 
-Filename: cloud_asset-0.0.4.5.dist-info/LICENSE
+Filename: cloud_asset-0.0.4.6.dist-info/LICENSE
 Comment: 
 
-Filename: cloud_asset-0.0.4.5.dist-info/METADATA
+Filename: cloud_asset-0.0.4.6.dist-info/METADATA
 Comment: 
 
-Filename: cloud_asset-0.0.4.5.dist-info/WHEEL
+Filename: cloud_asset-0.0.4.6.dist-info/WHEEL
 Comment: 
 
-Filename: cloud_asset-0.0.4.5.dist-info/entry_points.txt
+Filename: cloud_asset-0.0.4.6.dist-info/entry_points.txt
 Comment: 
 
-Filename: cloud_asset-0.0.4.5.dist-info/top_level.txt
+Filename: cloud_asset-0.0.4.6.dist-info/top_level.txt
 Comment: 
 
-Filename: cloud_asset-0.0.4.5.dist-info/RECORD
+Filename: cloud_asset-0.0.4.6.dist-info/RECORD
 Comment: 
 
 Zip file comment:
```

## asset/base.py

```diff
@@ -456,16 +456,24 @@
         return assets
 
     def _get_account_id(self):
         return get_aws_account_id(self.cred)
 
     @classmethod
     def load_creds(cls, profile: AwsProfile) -> List[AwsCredential]:
+        creds = []
         for role in profile.roles:
-            yield aws_assume_role(role.arn, role_session_name=role.session_name, duration_seconds=role.duration_seconds)
+            try:
+                creds.append(
+                    aws_assume_role(role.arn, role_session_name=role.session_name, duration_seconds=role.duration_seconds)
+                )
+            except Exception as e:
+                cls.logger.error(f'aws_assume_role fail, error: {e} ')
+                continue
+        return creds
 
 
 class HuaweiAsset(Asset):
     _platform = 'huawei'
 
     _client = None
     _region_obj = None
```

## asset/commands.py

```diff
@@ -8,14 +8,15 @@
 import importlib
 
 from asset.asset_register import cloud_providers
 from asset.schema import DbConfig, TencentProfile, AliyunProfile, AwsProfile, HuaweiProfile
 from asset.ctx import FetchCtx
 
 from typing import Union
+from logging.handlers import TimedRotatingFileHandler
 
 
 _default_log_dir_path = './'
 
 
 class Fetch:
     logger = logging.getLogger('cloud-asset-fetch')
@@ -64,20 +65,22 @@
         importlib.import_module(f'asset.{cloud_provider}')
         return getattr(cloud_providers, cloud_provider)
 
     def _setup_logger(self):
         dir_path = os.path.join(self.log_dir_path, 'fetch_log')
         if not os.path.exists(dir_path):
             os.mkdir(dir_path)
-        handler = logging.FileHandler(os.path.join(dir_path, 'fetch.log'))
-        handler.setLevel(logging.INFO)
-        handler.setFormatter(logging.Formatter("%(asctime)s: %(name)s:%(levelname)s:%(message)s"))
+        file_handler = TimedRotatingFileHandler(
+            filename=os.path.join(dir_path, 'fetch.log'), when="MIDNIGHT", interval=1, backupCount=7, encoding='utf-8'
+        )
+        file_handler.setLevel(logging.INFO)
+        file_handler.setFormatter(logging.Formatter("%(asctime)s: %(name)s:%(levelname)s:%(message)s"))
 
         console_handler = logging.StreamHandler()
         console_handler.setLevel(logging.INFO)
 
-        self.logger.addHandler(handler)
+        self.logger.addHandler(file_handler)
         self.logger.addHandler(console_handler)
         self.logger.setLevel(logging.INFO)
```

## asset/tools.py

```diff
@@ -25,23 +25,22 @@
             raise Exception(f'不支持的类型, value: {value}')
         _fields.append({'name': key, 'type': _type})
     return _fields
 
 
 if __name__ == '__main__':
 
-    fields_demo =  {
-        'AddressLine1': 'string',
-        'AddressLine2': 'string',
-        'AddressLine3': 'string',
-        'City': 'string',
-        'CompanyName': 'string',
-        'CountryCode': 'string',
-        'DistrictOrCounty': 'string',
-        'FullName': 'string',
-        'PhoneNumber': 'string',
-        'PostalCode': 'string',
-        'StateOrRegion': 'string',
-        'WebsiteUrl': 'string'
+    fields_demo = {
+                "AddTime": "2020-11-28 10:05:52",
+                "ConsoleLogin": 0,
+                "DeletionTaskId": 'null',
+                "Description": "当前角色为腾讯云自动化助手 (TAT)服务相关角色，该角色将在已关联策略的权限范围内访问您的其他云服务资源。",
+                "PolicyDocument": "{\"version\":\"2.0\",\"statement\":[{\"action\":\"sts:AssumeRole\",\"effect\":\"allow\",\"principal\":{\"service\":[\"command.tat.cloud.tencent.com\"]}}]}",
+                "RoleId": "4611686018433460000",
+                "RoleName": "TAT_QCSLinkedRoleInCommand",
+                "RoleType": "service_linked",
+                "SessionDuration": 43200,
+                "Tags": [],
+                "UpdateTime": "2020-11-28 10:05:52"
     }
     for asset in asset_columns_generator(fields=fields_demo):
         print(str(asset) + ',')
```

## asset/aws/elb.py

```diff
@@ -55,15 +55,15 @@
             des_request_kwargs=_des_request_kwargs,
             parser_response_func=self.parser_response
         ).parser_response()
 
         for index in range(len(_assets) // 20 + 1):
             """get tags"""
             elb_list = _assets[index: 20: index * 20 + 20]
-            if elb_list:
+            if not elb_list:
                 break
             _tags, _ = self._describe(
                 self.client,
                 'describe_tags',
                 'TagDescriptions',
                 des_request_kwargs={'LoadBalancerNames': [elb['LoadBalancerNames']for elb in elb_list]},
                 parser_response_func=self.parser_response
```

## asset/tencent/cam.py

```diff
@@ -22,16 +22,30 @@
 ]
 user_ak_asset_columns = [
     {'name': 'AccessKeyId', 'type': 'str'},
     {'name': 'Status', 'type': 'str'},
     {'name': 'CreateTime', 'type': 'str'},
     {'name': 'LastUse', 'type': 'dict'},
 ]
+role_columns = [
+    {'name': 'AddTime', 'type': 'str'},
+    {'name': 'ConsoleLogin', 'type': 'int'},
+    {'name': 'DeletionTaskId', 'type': 'str'},
+    {'name': 'Description', 'type': 'str'},
+    {'name': 'PolicyDocument', 'type': 'str'},
+    {'name': 'RoleId', 'type': 'str'},
+    {'name': 'RoleName', 'type': 'str'},
+    {'name': 'RoleType', 'type': 'str'},
+    {'name': 'SessionDuration', 'type': 'int'},
+    {'name': 'Tags', 'type': 'dict'},
+    {'name': 'UpdateTime', 'type': 'str'}
+]
 user_asset_document = 'https://cloud.tencent.com/document/api/598/34587'
 user_ak_asset_document = 'https://cloud.tencent.com/document/api/598/45156'
+role_asset_document = 'https://cloud.tencent.com/document/api/598/36223'
 
 
 
 @cloud_providers.tencent.register('user')
 class User(TencentAsset):
     _des_request_func = 'ListUsers'
     _des_request = models.ListUsersRequest()
@@ -86,7 +100,12 @@
         ).parser_response()
         for asset in assets:
             asset['LastUse'] = list(filter(lambda x: x['SecretId'] == asset['AccessKeyId'], response))
 
         return assets
 
 
+# @cloud_providers.tencent.register('role')
+# class Role(TencentAsset):
+#     pass
+
+
```

## Comparing `cloud_asset-0.0.4.5.dist-info/LICENSE` & `cloud_asset-0.0.4.6.dist-info/LICENSE`

 * *Files identical despite different names*

## Comparing `cloud_asset-0.0.4.5.dist-info/METADATA` & `cloud_asset-0.0.4.6.dist-info/METADATA`

 * *Files 1% similar despite different names*

```diff
@@ -1,10 +1,10 @@
 Metadata-Version: 2.1
 Name: cloud-asset
-Version: 0.0.4.5
+Version: 0.0.4.6
 Summary: Cloud Asset - Asset For Postgres
 Author: Cloud Asset Authors
 Author-email: 
 License: Apache-2.0
 Requires-Python: >=3.7.1,<4.0
 Description-Content-Type: text/markdown
 License-File: LICENSE
```

## Comparing `cloud_asset-0.0.4.5.dist-info/RECORD` & `cloud_asset-0.0.4.6.dist-info/RECORD`

 * *Files 7% similar despite different names*

```diff
@@ -1,40 +1,40 @@
 asset/__init__.py,sha256=GvpscHSfjxM7PETS6otHH8z-AZF-aJDKR55Q-QFE2oY,102
 asset/asset_register.py,sha256=8Z2Nmq8c1bmkMo6pEYvlYrcdaq1glStlvi7qQ1Gc0Zw,863
 asset/asset_table.py,sha256=x0h-Pv5F1K2uidqnP8dwlfIxuYX7Tg85Okd1poYIJnw,3680
-asset/base.py,sha256=orKiaJIdMq3wpxxBf00BUGe9ospxRjtNcU2l8gbhxVI,17406
+asset/base.py,sha256=2ZiRuljOLCWAwY1rJwtrjNve2cedH7p9DmAzKPJ_1c0,17652
 asset/cli.py,sha256=t0TQIupOzYc4SUA35-DQzvMVWc6xmUu51CRiZBbtKOY,3255
-asset/commands.py,sha256=YCMS8XJWHqrx9mU9L9v-Emp3TE1x_Uc3r6ZIIwwt0MQ,3068
+asset/commands.py,sha256=hMWmcEG4QJHF8ABEZWhV2I7ehorWVb4BIRqkkBp3FhI,3243
 asset/conf.py,sha256=GsQoR0zDbWfVcYVRkQQ2C9judhTUlSW6WcASXh9uBNU,3236
 asset/ctx.py,sha256=oH_crAsyc3eWTsswZ_ART6Dm0T-rtHorJ4-1QM3wBYA,545
 asset/exceptions.py,sha256=vovYwzqafovNMf4eMx_Aiu9NfHtHVKjNyTJ9tlJOZpg,286
 asset/schema.py,sha256=qxiP6b3i3OUiMCJ0I7sGuH6tYJq6DAES3uoA-h1AE9I,1581
-asset/tools.py,sha256=a80amI1gq7tz9aYkfMj8TypcSf-lNqEYfiVG6A1xwo8,1425
+asset/tools.py,sha256=swj5PdC8-OvFuaE9drvbJuIW4V7ukOECTGTrh88AWcM,1809
 asset/utils.py,sha256=j-Uu4fXfUudP_Owiv37uLROoviDR3-5Weke-TBKH2BA,7093
 asset/aliyun/__init__.py,sha256=PoRsimzQI7Lpw2cujrHtOcHGdctd3FBFu9FB0njWdbQ,141
 asset/aliyun/ecs.py,sha256=6uZ5tbFJhbCpEHxw7HX1rHV7vtNf-adyFS9nAmiUUYY,15459
 asset/aliyun/ram.py,sha256=4Jnsnbr0wzApJxUDaHl4f2NHfinBrnFgESPLM5hreWw,2831
 asset/aws/__init__.py,sha256=WJhrNAsxqNG9idjBsbQz2651uEO0pUDF7M6l1f1LYZI,176
 asset/aws/account.py,sha256=iRTHB1EbJ8fpamBCcpa8Fp5I_0A3AMkTx7q32oAXyig,2510
 asset/aws/cloudwatch.py,sha256=i06mf37R7wMn8bJZxflapOM3GHXTTZs1XNaQqr5xXmM,4878
 asset/aws/ec2.py,sha256=zgYBqNykB4ru5aECglT1EUss_e7xzUL0pdsp-n5Gca0,11132
-asset/aws/elb.py,sha256=b2sdi-XLiQ0f8p4sPCtC1mWAsGXAcrZ1XLoWiAcHi9Y,3055
+asset/aws/elb.py,sha256=cLPqxLv-b4-am6ZCsQffG0Zp5rqtGrl97nIvuPbaUlo,3059
 asset/aws/elb_v2.py,sha256=lnExSX3Fv06nrZPociCv5sEAewajDXqLX9Hdvme1kcg,8620
 asset/aws/rds.py,sha256=QOSIu3HJM44Ib28pbSHzt9BtBYx8ceN_bILBPAg0rTI,9638
 asset/aws/s3.py,sha256=lxBcZP8mh1dILGC4txB7chqu2ClA6sPB4U2xXeZxmpM,3172
 asset/huawei/__init__.py,sha256=kt4AmFlsfUIrr6U4fKSM9muLwVu-PsAhUXx0rEYwcrQ,164
 asset/huawei/ecs.py,sha256=WY1LI_oB7mNI_pg1iGl_nSPqGPAAGfO8p2awjLdcOLo,7068
 asset/huawei/vpc.py,sha256=_8xyUWYBHY-HhmqBx3ht2sbTtpHsks0j8z8cCjP9qgw,2112
 asset/tencent/__init__.py,sha256=WaxVsEmhovjGGEVjw_5i-fZY4D-8wprCJdUbdnob5fU,175
-asset/tencent/cam.py,sha256=0Gq5f7HCDUicMPQ9pV2jSmGnKGia-NHv7hRsdif-vho,3164
+asset/tencent/cam.py,sha256=OJQgh-C9Zy8vlbWhfZNjTtZbRZdeVKTYwvlEM84U9tA,3832
 asset/tencent/cdb_mysql.py,sha256=YJJqU8zyV33nE0TMUdFafg1Ata8y8pQL2A1989EiBJ8,2901
 asset/tencent/clb.py,sha256=AXSqB1BtSrW2RNhQtdGfJlAIWfpvUdVFoqALiPT3aio,2309
 asset/tencent/cos.py,sha256=muWkfEdF0mHAGPTXw5MkBc13FrK8UMt9-QxPcy6QsMw,1804
 asset/tencent/cvm.py,sha256=QKj4PKvxJrjffT0Vr6H9eS_m65EmZxidsba-Yqqteag,2242
 asset/tencent/monitor.py,sha256=gEnGh0QxESqp5aZZ-LzLT6nQADsfCqZJPFI5QKNqJyc,3279
 asset/tencent/vpc.py,sha256=3XKDVm1fu0Egrc0wv3jbH-n2nxSLLSBzxxcS69VaR_Y,11514
-cloud_asset-0.0.4.5.dist-info/LICENSE,sha256=HrhfyXIkWY2tGFK11kg7vPCqhgh5DcxleloqdhrpyMY,11558
-cloud_asset-0.0.4.5.dist-info/METADATA,sha256=m1Skp-1kwf8w0pjtufzcHG4WntQrD0LLwNEDAfRbuw4,1193
-cloud_asset-0.0.4.5.dist-info/WHEEL,sha256=pkctZYzUS4AYVn6dJ-7367OJZivF2e8RA9b_ZBjif18,92
-cloud_asset-0.0.4.5.dist-info/entry_points.txt,sha256=E98BNjat-vzRmq_JOsUw1BEUB8gGDXTCrge_EcO1ItQ,47
-cloud_asset-0.0.4.5.dist-info/top_level.txt,sha256=OOL4Q5O665etnevbCwltTM6xLZ_EIE3w81HrT-kZli8,6
-cloud_asset-0.0.4.5.dist-info/RECORD,,
+cloud_asset-0.0.4.6.dist-info/LICENSE,sha256=HrhfyXIkWY2tGFK11kg7vPCqhgh5DcxleloqdhrpyMY,11558
+cloud_asset-0.0.4.6.dist-info/METADATA,sha256=gd1wEDBrq07EAGGWCq_2capdV1tux6g7kplcPgZh7BU,1193
+cloud_asset-0.0.4.6.dist-info/WHEEL,sha256=pkctZYzUS4AYVn6dJ-7367OJZivF2e8RA9b_ZBjif18,92
+cloud_asset-0.0.4.6.dist-info/entry_points.txt,sha256=E98BNjat-vzRmq_JOsUw1BEUB8gGDXTCrge_EcO1ItQ,47
+cloud_asset-0.0.4.6.dist-info/top_level.txt,sha256=OOL4Q5O665etnevbCwltTM6xLZ_EIE3w81HrT-kZli8,6
+cloud_asset-0.0.4.6.dist-info/RECORD,,
```

